<div ng-controller="SellController">

    <div class="shop-menu" ng-animate="shop" ng-class="{true: 'shop-enter', false: 'shop-leave'}[visible]">

        <div class="shop_icon">
            <img src="{{type.ico}}" style="width: 75%;"></img>
            <div class="shop-label ramka">
                <span class="shop-label-text"> {{ 'sell' | translate }}
                </span>
            </div>
        </div>

        <div class="shop_arrow" ng-click="hide()"></div>

        <div class="shop_menu_grid fa-inverse">

            <div ng-repeat="type in plantation.plantTypes" ng-show="storeCfg[type.name].max>0">
                Unsotred quantity of {{type.name}} ({{storeCfg[type.name].max}} kg): 
                <button class="btn btn-primary btn-xs" ng-click="sell(type, storeCfg[type.name])">Sell</button>
                <div slider class="slider" cfg="storeCfg[type.name]" value="storeCfg[type.name].quantity" ng-show="storeCfg[type.name].max"></div>
                <div>
                    <div>
                        Store {{storeCfg[type.name].quantity || 0}} kg in:
                    </div>
                    <div class="shop_item_in_grid" ng-repeat="item in fridges">
                        <button class="btn btn-primary btn-xs" ng-click="store(item, type, storeCfg[type.name])">Store here</button>
                    </div>
                </div>
            </div>

            <!-- Prikaz na frizderite -->
            <div class="shop_item_in_grid" ng-repeat="item in fridges">
                <div class="shop-item-label " ng-if="item.capacity">
                    <!-- Kupuvanje na kapacitet na frizder -->
                    <div ng-if="item.fridgeType">
                        <div slider class="slider" cfg="cfg[item.fridgeType]" value="fridgesCapacity[item.fridgeType].capacity"></div>
                        <div class="price">{{fridgesCapacity[item.fridgeType].capacity}} kg ({{fridgesCapacity[item.fridgeType].capacity * item.price}} evra)</div>
                        <button class="btn btn-primary btn-xs" ng-click="buyCapacity(item)">Buy capacity</button>
                    </div>
                    <!-- Prikaz na raftovite -->
                    <div ng-repeat="shelf in item.shelfs" ng-click="changeQuantity(shelf)" class="ramka" ng-show="shelf.quantity>0">
                        <img ng-src="{{shelf.plantType.imageurl}}" /> {{shelf.plantType.name}}: {{shelf.quantity}}

                        <!-- Remove slider div-->
                        <div ng-if="shelf.changeQuantity">
                            <div slider class="slider" cfg="shelf.cfg" value="shelf.sliderQuantity"></div>
                            <button class="btn btn-primary btn-xs" ng-click="removeQuantity(shelf,item)">Move</button>
                        </div>

                    </div>

                    <span class="title-text" translate="{{item.fridgeName}} ({{item.used}} / {{item.capacity}})"></span>

                </div>

            </div>
        </div>

    </div>

</div>
